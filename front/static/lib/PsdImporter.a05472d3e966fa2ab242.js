!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/lib/",n(n.s=90)}([function(t,e,n){var i=function(){this.offset,this.length,this.name,this.classId,this.items,this.item};i.prototype.parse=function(t){var e,n,r,o,s,a;for(this.offset=t.tell(),e=t.readUint32(),this.name=t.readWideString(e),e=t.readUint32()||4,this.classId=t.readString(e),this.items=t.readUint32(),this.item=[],o=0,s=this.items;o<s;++o){if(e=t.readUint32()||4,n=t.readString(e),r=t.readString(4),"function"!=typeof i[r]){console.log("OSType Key not implemented:",r);break}(a=new i[r]).parse(t),this.item.push({key:n,data:a})}this.length=t.tell()-this.offset},i.prototype.toObject=function(){for(var t={},e=0;e<this.item.length;e++){var n=this.item[e].key.replace(/\s+$/,""),i=this.item[e].data;i.toObject||console.log("NO toObject: "+n),t[n]=i.toObject?i.toObject():i}return t},t.exports=i,n(98),n(99),n(100),n(101),n(102),n(103),n(104),n(105),n(106),n(107),n(108),n(109),n(110),n(111),n(112),n(113),n(114),n(115)},function(t,e,n){(function(e){e.AdditionalLayerInfo=function(){this.offset,this.length,this.signature,this.key,this.data,this.info},AdditionalLayerInfo.prototype.parse=function(t,e){var n;this.offset=t.tell(),this.signature=t.readString(4),this.key=t.readString(4),n=t.readUint32(),this.length=n+12,"function"==typeof AdditionalLayerInfo[this.key]?(this.info=new AdditionalLayerInfo[this.key],this.info.parse(t,n,e)):console.log("additional layer information: not implemented",this.key),t.tell()-(this.offset+this.length)!=0&&(COMPILED||console.log(this.key,t.tell()-(this.offset+this.length))),t.seek(this.offset+this.length,0)},t.exports=AdditionalLayerInfo,n(6),n(127),n(6),n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(146),n(147)}).call(this,n(5))},,function(t,e,n){(function(e){StreamReader=function(t,e){this.input=USE_TYPEDARRAY?new Uint8Array(t):t,this.ip=0|e},StreamReader.prototype.readUint32=function(){return(this.input[this.ip++]<<24|this.input[this.ip++]<<16|this.input[this.ip++]<<8|this.input[this.ip++])>>>0},StreamReader.prototype.readInt32=function(){return this.input[this.ip++]<<24|this.input[this.ip++]<<16|this.input[this.ip++]<<8|this.input[this.ip++]},StreamReader.prototype.readUint16=function(){return this.input[this.ip++]<<8|this.input[this.ip++]},StreamReader.prototype.readInt16=function(){return(this.input[this.ip++]<<8|this.input[this.ip++])<<16>>16},StreamReader.prototype.readUint8=function(){return this.input[this.ip++]},StreamReader.prototype.readInt8=function(){return this.input[this.ip++]<<24>>24},StreamReader.prototype.readFloat64=function(){if(USE_TYPEDARRAY)var t=new ArrayBuffer(8),e=new Uint8Array(t),n=new Float64Array(t);else var i=Math.pow(2,48),r=Math.pow(2,40),o=Math.pow(2,32),s=Math.pow(2,24),a=Math.pow(2,16),h=Math.pow(2,8),f=Math.pow(2,-1022),l=Math.pow(2,-52);return function(){var t;return t=USE_TYPEDARRAY?function(t,i){var r=8;for(;--r;)e[r]=t[i++];return n[0]}(this.input,this.ip):function(t,e){var n=0==(128&t[e]),u=(127&t[e++])<<4|(240&t[e])>>4,c=(15&t[e++])*i+t[e++]*r+t[e++]*o+t[e++]*s+t[e++]*a+t[e++]*h+t[e++];if(0===u)return 0===c?0:(n?1:-1)*f*c*l;if(2047===u)return c?NaN:n?1/0:-1/0;return(n?1:-1)*(Math.pow(2,u-1023)+c*Math.pow(2,u-1075))}(this.input,this.ip),this.ip+=8,t}}(),StreamReader.prototype.read=function(t){return USE_TYPEDARRAY?this.input.subarray(this.ip,this.ip+=t):this.input.slice(this.ip,this.ip+=t)},StreamReader.prototype.readHex=function(t){return new e(this.read(t)).toString("hex")},StreamReader.prototype.slice=function(t,e){return this.ip=e,USE_TYPEDARRAY?this.input.subarray(t,e):this.input.slice(t,e)},StreamReader.prototype.fetch=function(t,e){return USE_TYPEDARRAY?this.input.subarray(t,e):this.input.slice(t,e)},StreamReader.prototype.readString=function(t){var e,n=this.input,i=this.ip,r=[];for(e=0;e<t;++e)r[e]=String.fromCharCode(n[i++]);return this.ip=i,r.join("")},StreamReader.prototype.readWideString=function(t){var e,n=this.input,i=this.ip,r=[];for(e=0;e<t;++e)r[e]=String.fromCharCode(n[i++]<<8|n[i++]);return this.ip=i,r.join("")},StreamReader.prototype.readUnicode=function(){var t=this.readUint32();return this.readWideString(t)},StreamReader.prototype.readPascalString=function(){return this.readString(this.input[this.ip++])},StreamReader.prototype.tell=function(){return this.ip},StreamReader.prototype.seek=function(t,e){"number"!=typeof e&&(e=this.ip),this.ip=e+t},StreamReader.prototype.readPackBits=function(t){var e,n,i,r=[],o=0;for(e=this.ip+t;this.ip<e;)if((n=this.readInt8())<0)for(n=1-n,i=this.readUint8();n-- >0;)r[o++]=i;else for(n=1+n;n-- >0;)r[o++]=this.readUint8();return r},t.exports=StreamReader}).call(this,n(18).Buffer)},,function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){n(1).EffectsLayer={},n(120),n(121),n(122),n(123),n(124),n(125),n(126)},,,,function(t,e,n){n(3);var i=function(){this.offset,this.length,this.signature,this.version,this.reserved,this.channels,this.rows,this.columns,this.depth,this.colorMode};i.prototype.parse=function(t){if(this.offset=t.tell(),this.signature=t.readString(4),"8BPS"!==this.signature)throw new Error("invalid signature");this.version=t.readUint16(),this.reserved=t.read(6),this.channels=t.readUint16(),this.rows=t.readUint32(),this.columns=t.readUint32(),this.depth=t.readUint16(),this.colorMode=t.readUint16(),this.length=t.tell()-this.offset},t.exports=i},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var h,f=[],l=!1,u=-1;function c(){l&&h&&(l=!1,h.length?f=h.concat(f):u=-1,f.length&&p())}function p(){if(!l){var t=a(c);l=!0;for(var e=f.length;e;){for(h=f,f=[];++u<e;)h&&h[u].run();u=-1,e=f.length}h=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new d(t,e)),1!==f.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},,,,,,,function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=n(27),r=n(28),o=n(21);function s(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=h.prototype:(null===t&&(t=new h(e)),t.length=e),t}function h(t,e,n){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return f(this,t,e,n)}function f(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i);h.TYPED_ARRAY_SUPPORT?(t=e).__proto__=h.prototype:t=c(t,e);return t}(t,e,n,i):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!h.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|d(e,n),r=(t=a(t,i)).write(e,n);r!==i&&(t=t.slice(0,r));return t}(t,e,n):function(t,e){if(h.isBuffer(e)){var n=0|p(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?a(t,0):c(t,e);if("Buffer"===e.type&&o(e.data))return c(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(l(e),t=a(t,e<0?0:0|p(e)),!h.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function c(t,e){var n=e.length<0?0:0|p(e.length);t=a(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(h.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(i)return N(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,n);case"utf8":case"utf-8":return I(this,e,n);case"ascii":return O(this,e,n);case"latin1":case"binary":return T(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function y(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function v(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=h.from(e,i)),h.isBuffer(e))return 0===e.length?-1:m(t,e,n,i,r);if("number"==typeof e)return e&=255,h.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,i,r){var o,s=1,a=t.length,h=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,h/=2,n/=2}function f(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var l=-1;for(o=n;o<a;o++)if(f(t,o)===f(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===h)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+h>a&&(n=a-h),o=n;o>=0;o--){for(var u=!0,c=0;c<h;c++)if(f(t,o+c)!==f(e,c)){u=!1;break}if(u)return o}return-1}function w(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function b(t,e,n,i){return F(N(e,t.length-n),t,n,i)}function U(t,e,n,i){return F(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function A(t,e,n,i){return U(t,e,n,i)}function E(t,e,n,i){return F(z(e),t,n,i)}function R(t,e,n,i){return F(function(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(e,t.length-n),t,n,i)}function S(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function I(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,s,a,h,f=t[r],l=null,u=f>239?4:f>223?3:f>191?2:1;if(r+u<=n)switch(u){case 1:f<128&&(l=f);break;case 2:128==(192&(o=t[r+1]))&&(h=(31&f)<<6|63&o)>127&&(l=h);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&(h=(15&f)<<12|(63&o)<<6|63&s)>2047&&(h<55296||h>57343)&&(l=h);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(h=(15&f)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&h<1114112&&(l=h)}null===l?(l=65533,u=1):l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|1023&l),i.push(l),r+=u}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return n}(i)}e.Buffer=h,e.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},e.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),h.poolSize=8192,h._augment=function(t){return t.__proto__=h.prototype,t},h.from=function(t,e,n){return f(null,t,e,n)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(t,e,n){return function(t,e,n,i){return l(e),e<=0?a(t,e):void 0!==n?"string"==typeof i?a(t,e).fill(n,i):a(t,e).fill(n):a(t,e)}(null,t,e,n)},h.allocUnsafe=function(t){return u(null,t)},h.allocUnsafeSlow=function(t){return u(null,t)},h.isBuffer=function(t){return!(null==t||!t._isBuffer)},h.compare=function(t,e){if(!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=h.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var s=t[n];if(!h.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},h.byteLength=d,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},h.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?I(this,0,t):g.apply(this,arguments)},h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,n,i,r){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),f=this.slice(i,r),l=t.slice(e,n),u=0;u<a;++u)if(f[u]!==l[u]){o=f[u],s=l[u];break}return o<s?-1:s<o?1:0},h.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},h.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},h.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},h.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return U(this,t,e,n);case"latin1":case"binary":return A(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function T(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function k(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=j(t[o]);return r}function P(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function L(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function _(t,e,n,i,r,o){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function C(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function B(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function M(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(t,e,n,i,o){return o||M(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function Y(t,e,n,i,o){return o||M(t,0,n,8),r.write(t,e,n,i,52,8),n+8}h.prototype.slice=function(t,e){var n,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),h.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=h.prototype;else{var r=e-t;n=new h(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},h.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},h.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},h.prototype.readUInt8=function(t,e){return e||L(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return e||L(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return e||L(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},h.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||L(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){e||L(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt16BE=function(t,e){e||L(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt32LE=function(t,e){return e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return e||L(t,4,this.length),r.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return e||L(t,4,this.length),r.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return e||L(t,8,this.length),r.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return e||L(t,8,this.length),r.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||_(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},h.prototype.writeUIntBE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||_(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},h.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,1,255,0),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},h.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},h.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):B(this,t,e,!0),e+4},h.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},h.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);_(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},h.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);_(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},h.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,1,127,-128),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},h.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},h.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):B(this,t,e,!0),e+4},h.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},h.prototype.writeFloatLE=function(t,e,n){return D(this,t,e,!0,n)},h.prototype.writeFloatBE=function(t,e,n){return D(this,t,e,!1,n)},h.prototype.writeDoubleLE=function(t,e,n){return Y(this,t,e,!0,n)},h.prototype.writeDoubleBE=function(t,e,n){return Y(this,t,e,!1,n)},h.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!h.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},h.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!h.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=h.isBuffer(t)?t:N(new h(t,i).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var x=/[^+\/0-9A-Za-z-_]/g;function j(t){return t<16?"0"+t.toString(16):t.toString(16)}function N(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],s=0;s<i;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(x,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,n(5))},function(t,e,n){(function(t){var i=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},i=0;i<e.length;i++)n[e[i]]=Object.getOwnPropertyDescriptor(t,e[i]);return n},r=/%[sdj%]/g;e.format=function(t){if(!v(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var i=arguments,o=i.length,s=String(t).replace(r,(function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}})),h=i[n];n<o;h=i[++n])g(h)||!b(h)?s+=" "+h:s+=" "+a(h);return s},e.deprecate=function(n,i){if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,i).apply(this,arguments)};var r=!1;return function(){if(!r){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),r=!0}return n.apply(this,arguments)}};var o,s={};function a(t,n){var i={seen:[],stylize:f};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),d(n)?i.showHidden=n:n&&e._extend(i,n),m(i.showHidden)&&(i.showHidden=!1),m(i.depth)&&(i.depth=2),m(i.colors)&&(i.colors=!1),m(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=h),l(i,t,i.depth)}function h(t,e){var n=a.styles[e];return n?"["+a.colors[n][0]+"m"+t+"["+a.colors[n][1]+"m":t}function f(t,e){return t}function l(t,n,i){if(t.customInspect&&n&&E(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return v(r)||(r=l(t,r,i)),r}var o=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(v(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(y(e))return t.stylize(""+e,"number");if(d(e))return t.stylize(""+e,"boolean");if(g(e))return t.stylize("null","null")}(t,n);if(o)return o;var s=Object.keys(n),a=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),A(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(n);if(0===s.length){if(E(n)){var h=n.name?": "+n.name:"";return t.stylize("[Function"+h+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(U(n))return t.stylize(Date.prototype.toString.call(n),"date");if(A(n))return u(n)}var f,b="",R=!1,S=["{","}"];(p(n)&&(R=!0,S=["[","]"]),E(n))&&(b=" [Function"+(n.name?": "+n.name:"")+"]");return w(n)&&(b=" "+RegExp.prototype.toString.call(n)),U(n)&&(b=" "+Date.prototype.toUTCString.call(n)),A(n)&&(b=" "+u(n)),0!==s.length||R&&0!=n.length?i<0?w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),f=R?function(t,e,n,i,r){for(var o=[],s=0,a=e.length;s<a;++s)T(e,String(s))?o.push(c(t,e,n,i,String(s),!0)):o.push("");return r.forEach((function(r){r.match(/^\d+$/)||o.push(c(t,e,n,i,r,!0))})),o}(t,n,i,a,s):s.map((function(e){return c(t,n,i,a,e,R)})),t.seen.pop(),function(t,e,n){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(f,b,S)):S[0]+b+S[1]}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,e,n,i,r,o){var s,a,h;if((h=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?a=h.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):h.set&&(a=t.stylize("[Setter]","special")),T(i,r)||(s="["+r+"]"),a||(t.seen.indexOf(h.value)<0?(a=g(n)?l(t,h.value,null):l(t,h.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),m(s)){if(o&&r.match(/^\d+$/))return a;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function g(t){return null===t}function y(t){return"number"==typeof t}function v(t){return"string"==typeof t}function m(t){return void 0===t}function w(t){return b(t)&&"[object RegExp]"===R(t)}function b(t){return"object"==typeof t&&null!==t}function U(t){return b(t)&&"[object Date]"===R(t)}function A(t){return b(t)&&("[object Error]"===R(t)||t instanceof Error)}function E(t){return"function"==typeof t}function R(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(m(o)&&(o=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var i=t.pid;s[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,i,t)}}else s[n]=function(){};return s[n]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=d,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=v,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=m,e.isRegExp=w,e.isObject=b,e.isDate=U,e.isError=A,e.isFunction=E,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(116);var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),I[t.getMonth()],e].join(" ")}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",O(),e.format.apply(e,arguments))},e.inherits=n(117),e._extend=function(t,e){if(!e||!b(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t};var k="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(k&&t[k]){var e;if("function"!=typeof(e=t[k]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,k,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,i=new Promise((function(t,i){e=t,n=i})),r=[],o=0;o<arguments.length;o++)r.push(arguments[o]);r.push((function(t,i){t?n(t):e(i)}));try{t.apply(this,r)}catch(t){n(t)}return i}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),k&&Object.defineProperty(e,k,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,i(t))},e.promisify.custom=k,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);var r=n.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return r.apply(o,arguments)};e.apply(this,n).then((function(e){t.nextTick(s,null,e)}),(function(e){t.nextTick(P,e,s)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,i(e)),n}}).call(this,n(11))},,function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},,,,,,function(t,e,n){"use strict";e.byteLength=function(t){var e=f(t),n=e[0],i=e[1];return 3*(n+i)/4-i},e.toByteArray=function(t){var e,n,i=f(t),s=i[0],a=i[1],h=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),l=0,u=a>0?s-4:s;for(n=0;n<u;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],h[l++]=e>>16&255,h[l++]=e>>8&255,h[l++]=255&e;2===a&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,h[l++]=255&e);1===a&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,h[l++]=e>>8&255,h[l++]=255&e);return h},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,o=[],s=0,a=n-r;s<a;s+=16383)o.push(l(t,s,s+16383>a?a:s+16383));1===r?(e=t[n-1],o.push(i[e>>2]+i[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],o.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"="));return o.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,h=s.length;a<h;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function f(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var r,o,s=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,h=(1<<a)-1,f=h>>1,l=-7,u=n?r-1:0,c=n?-1:1,p=t[e+u];for(u+=c,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+u],u+=c,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=i;l>0;s=256*s+t[e+u],u+=c,l-=8);if(0===o)o=1-f;else{if(o===h)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=f}return(p?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var s,a,h,f=8*o-r-1,l=(1<<f)-1,u=l>>1,c=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,d=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),(e+=s+u>=1?c/h:c*Math.pow(2,1-u))*h>=2&&(s++,h/=2),s+u>=l?(a=0,s=l):s+u>=1?(a=(e*h-1)*Math.pow(2,r),s+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,r),s=0));r>=8;t[n+p]=255&a,p+=d,a/=256,r-=8);for(s=s<<r|a,f+=r;f>0;t[n+p]=255&s,p+=d,s/=256,f-=8);t[n+p-d]|=128*g}},function(t,e){t.exports={BITMAP:0,GRAYSCALE:1,INDEXED_COLOR:2,RGB_COLOR:3,CMYK_COLOR:4,MULTICHANNEL_COLOR:7,DUOTONE:8,LAB_COLOR:9}},function(t,e,n){n(3);var i=n(1),r=n(149),o=n(150);LayerRecord=function(){this.offset,this.length,this.top,this.left,this.bottom,this.right,this.channels,this.info=[],this.blendMode,this.opacity,this.clipping,this.flags,this.filter,this.name,this.layerMaskData,this.blendingRanges,this.additionalLayerInfo},LayerRecord.prototype.parse=function(t,e){var n,s,a,h;for(this.offset=t.tell(),this.top=t.readInt32(),this.left=t.readInt32(),this.bottom=t.readInt32(),this.right=t.readInt32(),this.channels=t.readUint16(),s=0,a=this.channels;s<a;++s)this.info[s]={id:t.readInt16(),length:t.readUint32()};if("8BIM"!==t.readString(4))throw new Error("invalid blend mode signature");this.blendMode=t.readString(4),this.opacity=t.readUint8(),this.clipping=t.readUint8(),this.flags=t.readUint8(),this.filter=t.readUint8(),this.extraLength=t.readUint32(),n=t.tell()+this.extraLength,this.layerMaskData=new r,this.layerMaskData.parse(t),this.blendingRanges=new o,this.blendingRanges.parse(t);var f=t.readUint8();for(this.name=t.readString(f),t.seek((4-(1+f)%4)%4),this.additionalLayerInfo=[];t.tell()<n;)(h=new i).parse(t,e),this.additionalLayerInfo.push(h);this.length=t.tell()-this.offset},t.exports=LayerRecord},,,,,,,,,,,,,,,,,,,function(t,e){t.exports={RAW:0,RLE:1,ZIP_WITHOUT_PREDICTION:2,ZIP_WITH_PREDICTION:3}},function(t,e){var n=function(){this.channel};n.prototype.parse=function(){throw"abstract"},t.exports=n},function(t,e){var n=function(){this.channel};n.prototype.parse=function(){throw"abstract"},t.exports=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){t.exports=n(91)},function(t,e,n){"use strict";var i=n(92);addEventListener("message",(function(t){var e=new FileReader;e.onload=function(e){var n=new Uint8Array(e.target.result),r=new i.Parser(n);r.parse(),console.log(r.header,r.imageData);var o=r.imageData.createBytes(r.header,r.colorModeData),s=t.data.name,a=s.lastIndexOf(".");-1!==a&&(s=s.substring(0,a));var h={name:s,type:"image/layered",id:0,generateNewId:!0,width:r.header.columns,height:r.header.rows,channels:4,bytes:o,children:[]};if(r.layerAndMaskInformation&&r.layerAndMaskInformation.layerInfo){var f=r.layerAndMaskInformation.layerInfo,l=r.header.columns,u=r.header.rows;if(f.channelImageData)for(var c=0;c<f.channelImageData.length;c++){var p=f.channelImageData[c],d=f.layerRecord[c];if(0==(2&d.flags)){var g=d.right-d.left,y=d.bottom-d.top;if(0!=g&&0!=y){var v=p.channel.length,m=new Uint8Array(v*g*y),w={name:d.name,id:c+1,generateNewId:!0,type:"image/layer",width:g,height:y,channels:v,bytes:m,left:d.left+g/2-l/2,top:u-d.bottom+y/2-u/2};h.children.push(w);for(var b=g*y,U=0;U<b;U++)for(var A=0;A<v;A++){var E=p.channel[A].channel;if(4==v)m[4*U+(A+3)%4]=E[U];else m[U*v+A]=E[U]}}}}}postMessage(h)},e.readAsArrayBuffer(t.data),console.log("EVENT",t)}))},function(t,e,n){e.Parser=n(93)},function(t,e,n){(function(e){e.USE_TYPEDARRAY=!0,e.COMPILED=!0;var i=n(3),r=n(10),o=n(94),s=n(95),a=n(118),h=n(155),f=function(t,e){e||(e={}),this.stream=new i(t,0|e.inputPosition),this.header,this.colorModeData,this.imageResources,this.layerAndMaskInformation,this.imageData};f.prototype.parse=function(){var t=this.stream;this.header=new r,this.colorModeData=new o,this.imageResources=new s,this.layerAndMaskInformation=new a,this.imageData=new h,this.header.parse(t),this.colorModeData.parse(t,this.header),this.imageResources.parse(t),this.layerAndMaskInformation.parse(t,this.header),this.imageData.parse(t,this.header),this.stream.input=null},t.exports=f}).call(this,n(5))},function(t,e,n){n(3),n(10);var i=n(29),r=function(){this.offset,this.length,this.data};r.prototype.parse=function(t,e){var n;if(this.offset=t.tell(),n=t.readUint32(),this.length=n+4,e.colorMode===i.INDEXED_COLOR&&768!==n)throw new Error("invalid color mode data");this.data=t.read(n)},t.exports=r},function(t,e,n){n(3);var i=n(96),r=function(){this.offset,this.length,this.imageResource};r.prototype.parse=function(t){var e;for(this.offset=t.tell(),e=t.readUint32(),this.length=e+4,this.imageResources=[];t.tell()<this.offset+this.length;){var n=new i;n.parse(t),this.imageResources.push(n)}t.seek(this.offset+this.length,0)},t.exports=r},function(t,e,n){(function(e){n(3);e.ImageResourceBlock=function(){this.offset,this.length,this.identifier,this.name,this.dataSize,this.data},ImageResourceBlock.prototype.parse=function(t){if(this.offset=t.tell(),"8BIM"!==t.readString(4))throw new Error("invalid signature at "+this.offset);if(this.identifier=t.readUint16(),this.name=t.readPascalString(),this.name.length||t.readUint8(),this.dataSize=t.readUint32(),ImageResourceBlock[this.identifier+""]){var e=t.tell(),n=new ImageResourceBlock[this.identifier+""];n.parse(t),this.data=n,t.seek(e+this.dataSize,0)}else this.data=t.read(this.dataSize);0!=t.readUint8()&&t.seek(t.tell()-1,0),this.length=t.tell()-this.offset},ImageResourceBlock.prototype.toObject=function(){return this.data.toObject?this.data.toObject():this.data},t.exports=ImageResourceBlock,n(97)}).call(this,n(5))},function(t,e,n){var i=n(0);n(19);ImageResourceBlock[1050]=function(){};var r=function(){};r.prototype.parse=function(t){this.offset=t.tell(),this.sliceID=t.readUint32(),this.groupId=t.readUint32(),this.origin=t.readUint32(),1==parseInt(this.origin)&&(this.associatedLayerId=t.readUint32()),this.Nm=t.readUnicode(),this.Type=t.readUint32(),this.bounds={Left:t.readUint32(),Top:t.readUint32(),Rght:t.readUint32(),Btom:t.readUint32()},this.url=t.readUnicode(),this.target=t.readUnicode(),this.Msge=t.readUnicode(),this.altTag=t.readUnicode(),this.cellIsHtml=t.readUint8(),this.cellText=t.readUnicode(),this.horzAlign=t.readUint32(),this.vertAlign=t.readUint32(),this.color={alpha:t.readUint8(),red:t.readUint8(),green:t.readUint8(),blue:t.readUint8()},this.length=t.tell()-this.offset},ImageResourceBlock[1050].prototype.type="sliceInfo",ImageResourceBlock[1050].prototype.parse=function(t){if(this.offset=t.tell(),this.version=t.readUint32(),6==this.version){this.bounds={Top:t.readUint32(),Left:t.readUint32(),Bottom:t.readUint32(),Right:t.readUint32()},this.name=t.readUnicode(),this.count=t.readUint32(),this.slices=[];for(var e=0;e<this.count-1;e++){var n=new r;n.parse(t),this.slices.push(n)}}else{t.readUint32();this.descriptor=new i,this.descriptor.parse(t)}this.length=t.tell()-this.offset},ImageResourceBlock[1050].prototype.toObject=function(){return this.slices?{slices:this.slices}:this.descriptor.toObject?this.descriptor.toObject():this.descriptor}},function(t,e,n){var i=n(0);i.alis=function(){this.offset,this.length,this.value},i.alis.prototype.parse=function(t){var e;this.offset=t.tell(),e=t.readUint32(),this.value=t.read(e),this.length=t.tell()-this.offset},i.alis.prototype.toObject=function(){return this.value}},function(t,e,n){var i=n(0);i.bool=function(){this.offset,this.length,this.value},i.bool.prototype.parse=function(t){this.offset=t.tell(),this.value=!!t.readUint8(),this.length=t.tell()-this.offset},i.bool.prototype.toObject=function(){return this.value}},function(t,e,n){var i=n(0);i.doub=function(){this.offset,this.length,this.value},i.doub.prototype.parse=function(t){this.offset=t.tell(),this.value=t.readFloat64(),this.length=t.tell()-this.offset},i.doub.prototype.toObject=function(){return this.value}},function(t,e,n){var i=n(0);i.enum=function(){this.offset,this.length,this.type,this.enum},i.enum.prototype.parse=function(t){var e;this.offset=t.tell(),0===(e=t.readUint32())&&(e=4),this.type=t.readString(e),0===(e=t.readUint32())&&(e=4),this.enum=t.readString(e),this.length=t.tell()-this.offset},i.enum.prototype.toObject=function(){return this.enum}},function(t,e,n){var i=n(0);i.GlbC=i.type},function(t,e,n){var i=n(0);i.GlbO=i.Objc},function(t,e,n){var i=n(0);i.long=function(){this.offset,this.length,this.value},i.long.prototype.parse=function(t){this.offset=t.tell(),this.value=t.readInt32(),this.length=t.tell()-this.offset},i.long.prototype.toObject=function(){return this.value}},function(t,e,n){var i=n(0);i.ObAr=function(){this.offset,this.length},i.ObAr.prototype.parse=function(t){this.offset=t.tell(),console.log("OSType key not implemented (undocumented): ObAr(ObjectArray?)"),this.length=t.tell()-this.offset}},function(t,e,n){var i=n(0);i["obj "]=function(){this.offset,this.length,this.items,this.item},i["obj "].prototype.parse=function(t){var e,n,r,o,s;for(this.offset=t.tell(),this.item=[],e=this.items=t.readUint32(),s=0;s<e;++s){if(n=t.readString(4),r=i["obj "].Table[n],"function"!=typeof i[r])return void console.log("OSType Key not implemented:",r);(o=new i[r]).parse(t),this.item.push({key:n,data:o})}this.length=t.tell()-this.offset},i["obj "].Table={prop:"prop",Clss:"type",Enmr:"enum",rele:"rele",Idnt:"long",indx:"long",name:"TEXT"},i["obj "].prototype.toObject=function(){return this.item.map((function(t){return this.item.data.toObject?this.item.data.toObject():this.item.data}))}},function(t,e,n){var i=n(0);i.Objc=function(){this.offset,this.length,this.value},i.Objc.prototype.parse=function(t){this.offset=t.tell(),this.value=new i,this.value.parse(t),this.length=t.tell()-this.offset},i.Objc.prototype.toObject=function(){return this.value.toObject?this.value.toObject():this.value}},function(t,e,n){var i=n(0);i.prop=function(){this.offset,this.length,this.name,this.classId,this.keyId},i.prop.prototype.parse=function(t){var e;this.offset=t.tell(),e=t.readUint32(),this.name=t.readWideString(e),e=t.readUint32()||4,this.classId=t.readString(e),e=t.readUint32()||4,this.keyId=t.readString(e),this.length=t.tell()-this.offset},i.prop.prototype.toObject=function(){return{name:this.name,classId:this.classId}}},function(t,e,n){var i=n(0);i.rele=function(){this.offset,this.length,this.name,this.classId,this.value},i.rele.prototype.parse=function(t){var e;this.offset=t.tell(),e=t.readUint32(),this.name=t.readWideString(e),e=t.readUint32()||4,this.classId=t.readString(e),this.value=t.readUint32(),this.length=t.tell()-this.offset},i.rele.prototype.toObject=function(){return{name:this.name,value:this.value,classId:this.classId}}},function(t,e,n){var i=n(0);i.tdta=function(){this.offset,this.length,this.value},i.tdta.prototype.parse=function(t){var e;this.offset=t.tell(),e=t.readUint32(),this.data=t.read(e),this.length=t.tell()-this.offset},i.tdta.prototype.toObject=function(){return this.data}},function(t,e,n){var i=n(0);i.TEXT=function(){this.offset,this.length,this.string},i.TEXT.prototype.parse=function(t){var e;this.offset=t.tell(),e=t.readUint32(),this.string=t.readWideString(e),this.length=t.tell()-this.offset},i.TEXT.prototype.toObject=function(){return this.string.slice(0,this.string.length-1)}},function(t,e,n){var i=n(0);i.type=function(){this.offset,this.length,this.name,this.classId},i.type.prototype.parse=function(t){var e;this.offset=t.tell(),e=t.readUint32(),this.name=t.readWideString(e),e=t.readUint32()||4,this.classId=t.readString(e),this.length=t.tell()-this.offset},i.type.prototype.toObject=function(){return{name:this.name,classId:this.classId}}},function(t,e,n){var i=n(0);i.UnFl=function(){this.offset,this.length,this.value},i.UnFl.prototype.parse=function(t){var e,n,i=this.value=[];for(this.offset=t.tell(),this.key=t.readString(4),e=t.readUint32(),n=0;n<e;++n)i[n]=t.readFloat64();this.length=t.tell()-this.offset},i.UnFl.prototype.toObject=function(){var t={};return t[this.key]=this.value,t}},function(t,e,n){var i=n(0);i.UntF=function(){this.offset,this.length,this.units,this.value},i.UntF.prototype.parse=function(t){this.offset=t.tell(),this.units=t.readString(4),this.value=t.readFloat64(),this.length=t.tell()-this.offset},i.UntF.prototype.toObject=function(){return{value:this.value,units:this.units}}},function(t,e,n){var i=n(0);i.VlLs=function(){this.offset,this.length,this.item},i.VlLs.prototype.parse=function(t){var e,n,r,o;for(this.offset=t.tell(),this.item=[],e=t.readUint32(),n=0;n<e;++n){if(r=t.readString(4),"function"!=typeof i[r])return void console.log("OSType Key not implemented:",r);(o=new i[r]).parse(t),this.item.push({type:r,data:o})}this.length=t.tell()-this.offset},i.VlLs.prototype.toObject=function(){return this.item.map((function(t){return t.data.toObject?t.data.toObject():t.data}))}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){n(3);var i=n(119),r=n(154),o=n(1),s=function(){this.offset,this.length,this.layerInfo,this.globalLayerMaskInfo,this.additionalLayerInfo};s.prototype.parse=function(t,e){var n;this.offset=t.tell(),n=t.readUint32(),this.length=n+4,0===n&&console.log("skip: layer and mask information (empty body)");var s=t.tell()+n;this.layerInfo=new i,this.globalLayerMaskInfo=new r,this.additionalLayerInfo=new o,this.layerInfo.parse(t,e),this.globalLayerMaskInfo.parse(t,e),this.additionalLayerInfo.parse(t,e),t.seek(s,0)},t.exports=s},function(t,e,n){n(3);var i=n(30),r=n(151),o=function(){this.offset,this.length,this.layerCount,this.layerRecord=[],this.channelImageData=[]};o.prototype.parse=function(t,e){var n,o,s,a;for(this.offset=t.tell(),this.length=t.readUint32()+4,this.layerCount=Math.abs(t.readInt16()),n=0,o=this.layerCount;n<o;++n)(s=new i).parse(t,e),this.layerRecord[n]=s;for(n=0,o=this.layerCount;n<o;++n)(a=new r).parse(t,this.layerRecord[n]),this.channelImageData[n]=a;t.seek(this.offset+this.length,0)},t.exports=o},function(t,e,n){n(6);AdditionalLayerInfo.EffectsLayer.bevl=function(){this.offset,this.length,this.size,this.version,this.angle,this.strength,this.blur,this.highlightBlendModeSignature,this.highlightBlendModeKey,this.shadowBlendModeSignature,this.shadowBlendModeKey,this.highlightColor,this.bevelStyle,this.highlightOpacity,this.shadowOpacity,this.enabled,this.use,this.up,this.readHighlightColor,this.readShadowColor},AdditionalLayerInfo.EffectsLayer.bevl.prototype.parse=function(t){this.offset=t.tell(),this.size=t.readUint32(),this.version=t.readUint32(),this.angle=t.readInt32(),this.strength=t.readInt32(),this.blur=t.readInt32(),this.highlightBlendModeSignature=t.readString(4),this.highlightBlendModeKey=t.readString(4),this.shadowBlendModeSignature=t.readString(4),this.shadowBlendModeKey=t.readString(4),t.seek(2),this.highlightColor=[t.readUint32(),t.readUint32()],t.seek(2),this.shadowColor=[t.readUint32(),t.readUint32()],this.bevelStyle=t.readUint8(),this.highlightOpacity=t.readUint8(),this.shadowOpacity=t.readUint8(),this.enabled=!!t.readUint8(),this.use=!!t.readUint8(),this.up=!!t.readUint8(),2===this.version&&(t.seek(2),this.readHighlightColor=[t.readUint32(),t.readUint32()],t.seek(2),this.readShadowColor=[t.readUint32(),t.readUint32()]),this.length=t.tell()-this.offset}},function(t,e,n){n(6);AdditionalLayerInfo.EffectsLayer.cmnS=function(){this.offset,this.length,this.size,this.version,this.visible},AdditionalLayerInfo.EffectsLayer.cmnS.prototype.parse=function(t){this.offset=t.tell(),this.size=t.readUint32(),this.version=t.readUint32(),this.visible=!!t.readUint8(),t.seek(2),this.length=t.tell()-this.offset}},function(t,e,n){n(6);AdditionalLayerInfo.EffectsLayer.dsdw=function(){this.offset,this.length,this.size,this.version,this.blur,this.intensity,this.angle,this.distance,this.color,this.signature,this.blend,this.enabled,this.use,this.opacity,this.nativeColor},AdditionalLayerInfo.EffectsLayer.dsdw.prototype.parse=function(t){this.offset=t.tell(),this.size=t.readUint32(),this.version=t.readUint32(),this.blur=t.readInt32(),this.intensity=t.readInt32(),this.angle=t.readInt32(),this.distance=t.readInt32(),t.seek(2),this.color=[t.readUint32(),t.readUint32()],this.signature=t.readString(4),this.blend=t.readString(4),this.enabled=!!t.readUint8(),this.use=!!t.readUint8(),this.opacity=t.readUint8(),t.seek(2),this.nativeColor=[t.readUint32(),t.readUint32()],this.length=t.tell()-this.offset}},function(t,e,n){n(6);AdditionalLayerInfo.EffectsLayer.iglw=function(){this.offset,this.length,this.size,this.version,this.blur,this.intensity,this.color,this.signature,this.blend,this.enabled,this.opacity,this.invert,this.nativeColor},AdditionalLayerInfo.EffectsLayer.iglw.prototype.parse=function(t){this.offset=t.tell(),this.size=t.readUint32(),this.version=t.readUint32(),this.blur=t.readInt32(),this.intensity=t.readInt32(),t.seek(2),this.color=[t.readUint32(),t.readUint32()],this.signature=t.readString(4),this.blend=t.readString(4),this.enabled=!!t.readUint8(),this.opacity=t.readUint8(),2===this.version&&(this.invert=!!t.readUint8(),t.seek(2),this.nativeColor=[t.readUint32(),t.readUint32()]),this.length=t.tell()-this.offset}},function(t,e,n){n(6);AdditionalLayerInfo.EffectsLayer.isdw=AdditionalLayerInfo.EffectsLayer.dsdw},function(t,e,n){n(6);AdditionalLayerInfo.EffectsLayer.oglw=function(){this.offset,this.length,this.size,this.version,this.blur,this.intensity,this.color,this.signature,this.blend,this.enabled,this.opacity,this.nativeColor},AdditionalLayerInfo.EffectsLayer.oglw.prototype.parse=function(t){this.offset=t.tell(),this.size=t.readUint32(),this.version=t.readUint32(),this.blur=t.readInt32(),this.intensity=t.readInt32(),t.seek(2),this.color=[t.readUint32(),t.readUint32()],this.signature=t.readString(4),this.blend=t.readString(4),this.enabled=!!t.readUint8(),this.opacity=t.readUint8(),2===this.version&&(t.seek(2),this.nativeColor=[t.readUint32(),t.readUint32()]),this.length=t.tell()-this.offset}},function(t,e,n){n(6);AdditionalLayerInfo.EffectsLayer.sofi=function(){this.offset,this.length,this.size,this.version,this.blend,this.color,this.opacity,this.enabled,this.nativeColor},AdditionalLayerInfo.EffectsLayer.sofi.prototype.parse=function(t){var e;if(this.offset=t.tell(),this.size=t.readUint32(),this.version=t.readUint32(),"8BIM"!==(e=t.readString(4)))throw new Error("invalid signature:",e);this.blend=t.readString(4),t.seek(2),this.color=[t.readUint16()>>8,t.readUint16()>>8,t.readUint16()>>8,t.readUint16()>>8],this.opacity=t.readUint8(),this.enabled=!!t.readUint8(),t.seek(2),this.nativeColor=[t.readInt16()>>8,t.readInt16()>>8,t.readInt16()>>8,t.readInt16()>>8],this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1);i.clbl=function(){this.offset,this.length,this.blendClippedElements},i.clbl.prototype.parse=function(t){this.offset=t.tell(),this.blendClippedElements=!!t.readUint8(),t.seek(3),this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1);i.fxrp=function(){this.offset,this.length,this.referencePoint},i.fxrp.prototype.parse=function(t){this.offset=t.tell(),this.referencePoint=[t.readFloat64(),t.readFloat64()],this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1),r=n(0);i.GdFl=function(){this.offset,this.length,this.version,this.descriptor},i.GdFl.prototype.parse=function(t){this.offset=t.tell(),this.version=t.readUint32(),this.descriptor=new r,this.descriptor.parse(t),this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1);i.infx=function(){this.offset,this.length,this.blendInteriorElements},i.infx.prototype.parse=function(t){this.offset=t.tell(),this.blendInteriorElements=!!t.readUint8(),t.seek(3),this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1);i.iOpa=function(){this.offset,this.length,this.opacity},i.iOpa.prototype.parse=function(t){this.offset=t.tell(),this.opacity=t.readUint8(),t.seek(3),this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1);i.knko=function(){this.offset,this.length,this.knockout},i.knko.prototype.parse=function(t){this.offset=t.tell(),this.knockout=!!t.readUint8(),t.seek(3),this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1);i.lclr=function(){this.offset,this.length,this.color},i.lclr.prototype.parse=function(t){this.offset=t.tell(),this.color=[t.readUint32(),t.readUint32()],this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1),r=n(0);i.lfx2=function(){this.offset,this.length,this.version,this.descriptorVersion},i.lfx2.prototype.parse=function(t){this.offset=t.tell(),this.version=t.readUint32(),this.descriptorVersion=t.readUint32(),this.descriptor=new r,this.descriptor.parse(t),this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1);i.lnsr=function(){this.offset,this.length,this.id},i.lnsr.prototype.parse=function(t){this.offset=t.tell(),this.id=t.readString(4),this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1);i.lrFX=function(){this.offset,this.length,this.version,this.count,this.effect},i.lrFX.prototype.parse=function(t){var e,n,r,o;for(this.offset=t.tell(),this.version=t.readUint16(),this.count=t.readUint16(),this.effect=[],o=0;o<this.count;++o){if("8BIM"!==(e=t.readString(4))){console.log("invalid signature:",e);break}if(this.key=n=t.readString(4),"function"!=typeof i.EffectsLayer[this.key]){console.log("detect unknown key:",n);break}(r=new i.EffectsLayer[this.key]).parse(t),this.effect[o]={key:n,effect:r}}this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1);i.lsct=function(){this.offset,this.length,this.type,this.key},i.lsct.prototype.parse=function(t,e){var n;if(this.offset=t.tell(),this.type=t.readUint32(),12===e){if("8BIM"!==(n=t.readString(4)))throw new Error("invalid section divider setting signature:",n);this.key=t.readString(4)}this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1);i.lspf=function(){this.offset,this.length,this.flags},i.lspf.prototype.parse=function(t){this.offset=t.tell(),this.flags=t.readUint32(),this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1);i.luni=function(){this.offset,this.length,this.layerName},i.luni.prototype.parse=function(t){var e;this.offset=t.tell(),e=t.readUint32(),this.layerName=t.readWideString(e),1==(1&e)&&t.seek(2),this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1);i.lyid=function(){this.offset,this.length,this.layerId},i.lyid.prototype.parse=function(t){this.offset=t.tell(),this.layerId=t.readUint32(),this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1);i.lyvr=function(){this.offset,this.length,this.version},i.lyvr.prototype.parse=function(t){this.offset=t.tell(),this.version=t.readUint32(),this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1),r=n(29);i.Patt=function(){this.offset,this.length,this.pattern},i.Patt.prototype.parse=function(t,e,n){var i=t.tell()+e;for(this.offset=t.tell();t.tell()<i;)t.readUint32(),t.readUint32(),t.readInt32(),t.readInt16(),t.readInt16(),t.readWideString(t.readUint32()),t.readPascalString(),n.colorMode===r.INDEXED_COLOR&&t.read(768),t.read(i-this.offset);this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1),r=n(0);i.PlLd=function(){this.offset,this.length,this.type,this.version,this.id,this.page,this.totalPage,this.antiAlias,this.placedLayerType,this.transform,this.warpVersion,this.warpDescriptorVersion,this.descriptor},i.PlLd.prototype.parse=function(t){if(this.offset=t.tell(),this.type=t.readString(4),"plcL"!==this.type)throw new Error("invalid type:",this.type);this.version=t.readUint32(),this.id=t.readPascalString(),this.page=t.readInt32(),this.totalPage=t.readInt32(),this.antiAlias=t.readInt32(),this.placedLayerType=t.readInt32(),this.transform=[t.readFloat64(),t.readFloat64(),t.readFloat64(),t.readFloat64(),t.readFloat64(),t.readFloat64(),t.readFloat64(),t.readFloat64()],this.warpVersion=t.readInt32(),this.warpDescriptorVersion=t.readInt32(),this.descriptor=new r,this.descriptor.parse(t),this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1);i.shmd=function(){this.offset,this.length,this.items,this.metadata},i.shmd.prototype.parse=function(t){var e,n,i,r,o,s,a,h=this.metadata=[];for(this.offset=t.tell(),this.items=t.readUint32(),s=0,a=this.items;s<a;++s)e=t.readString(4),n=t.readString(4),i=t.readUint8(),t.seek(3),r=t.readUint32(),o=t.read(r),h[s]={signature:e,key:n,copy:i,data:o};this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1),r=n(0);i.SoCo=function(){this.offset,this.length,this.version,this.descriptor},i.SoCo.prototype.parse=function(t){this.offset=t.tell(),this.version=t.readUint32(),this.descriptor=new r,this.descriptor.parse(t),this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1),r=n(0);i.SoLd=function(){this.offset,this.length,this.identifier,this.version,this.descriptorVersion,this.descriptor},i.SoLd.prototype.parse=function(t){if(this.offset=t.tell(),this.identifier=t.readString(4),"soLD"!==this.identifier)throw new Error("invalid identifier:",this.identifier);this.version=t.readUint32(),this.descriptorVersion=t.readInt32(),this.descriptor=new r,this.descriptor.parse(t),this.length=t.tell()-this.offset}},function(t,e,n){var i=n(1),r=n(148);i.vmsk=function(){this.offset,this.length,this.version},i.vmsk.prototype.parse=function(t,e){var n=t.tell()+e;for(this.offset=t.tell(),this.version=t.readUint32(),this.flags=t.readUint32();t.tell()+26<=n;)this.path=new r,this.path.parse(t);this.length=t.tell()-this.offset}},function(t,e){var n=function(){this.offset,this.length,this.name,this.classId,this.items,this.item};n.prototype.parse=function(t){this.offset=t.tell(),this.type=t.readInt16(),t.seek(26,this.offset),this.length=t.tell()-this.offset},t.exports=n},function(t,e){LayerMaskData=function(){this.offset,this.length,this.top,this.left,this.bottom,this.right,this.defaultColor,this.flags,this.padding,this.realFlags,this.realBackground,this.top2,this.left2,this.bottom2,this.right2},LayerMaskData.prototype.parse=function(t){var e;this.offset=t.tell(),e=t.readUint32(),this.length=e+4,0!==e?(this.top=t.readInt32(),this.left=t.readInt32(),this.bottom=t.readInt32(),this.right=t.readInt32(),this.defaultColor=t.readUint8(),this.flags=t.readUint8(),20===e?this.padding=t.readUint16():(this.realFlags=t.readUint8(),this.realBackground=t.readUint8(),this.top2=t.readInt32(),this.left2=t.readInt32(),this.bottom2=t.readInt32(),this.right2=t.readInt32())):console.log("skip: layer mask data (empty body)")},t.exports=LayerMaskData},function(t,e){var n=function(){this.offset,this.length,this.channel=[],this.black,this.white,this.destRange};n.prototype.parse=function(t){var e;if(this.offset=t.tell(),this.length=t.readUint32()+4,4!==this.length)for(e=this.offset+this.length,this.black=t.readUint16(),this.white=t.readUint16(),this.destRange=t.readUint32();t.tell()<e;)this.channel.push([t.readUint32(),t.readUint32()]);else console.log("skip: layer blending ranges(empty body)")},t.exports=n},function(t,e,n){n(3);var i=n(49),r=n(152),o=n(153),s=function(){this.offset,this.length,this.channel};s.prototype.parse=function(t,e){var n,s,a,h,f,l,u=this.channel=[];for(this.offset=t.tell(),a=0,h=e.channels;a<h;++a)if(f=t.tell(),l=e.info[a],s=t.readUint16(),2!==l.length){switch(s){case i.RAW:n=new r;break;case i.RLE:n=new o;break;default:throw new Error("unknown compression method: "+s)}n.parse(t,e,l.length-2),u[a]=n,t.seek(l.length+f,0)}this.length=t.tell()-this.offset},s.prototype.createCanvas=function(t,e,n){var i,r,o,s,a,h,f,l,u,c,p=document.createElement("canvas"),d=p.getContext("2d"),g=p.width=n.right-n.left,y=p.height=n.bottom-n.top,v=this.channel,m=[];if(0===g||0===y)return null;for(r=(i=d.createImageData(g,y)).data,h=0,f=v.length;h<f;++h)switch(n.info[h].id){case 0:case 1:case 2:case 3:m[n.info[h].id]=v[h].channel;break;case-1:u=v[h].channel;break;case-2:c=v[h].channel;break;default:console.log("not supported channel id",n.info[h].id);continue}for(u&&m.push(u),l=new Color(t,e,m).toRGBA(),s=0;s<y;++s)for(o=0;o<g;++o)r[4*(a=s*g+o)+0]=l[0][a],r[4*a+1]=l[1][a],r[4*a+2]=l[2][a],r[4*a+3]=c?c[a]/255*(l[3]?l[3][a]:255):l[3]?l[3][a]:255;return d.putImageData(i,0,0),p},t.exports=s},function(t,e,n){var i=n(19),r=n(50),o=(n(3),n(30),function(){r.call(this)});i.inherits(o,r),o.prototype.parse=function(t,e,n){e.right,e.left,e.bottom,e.top;this.channel=t.read(n)},t.exports=o},function(t,e,n){var i=n(19),r=n(50),o=(n(3),n(30),function(){this.lineLength});i.inherits(o,r),o.prototype.parse=function(t,e,n){var i,r,o=this.lineLength=[],s=[],a=e.bottom-e.top,h=t.tell()+n,f=0;for(i=0;i<a;++i)o[i]=t.readUint16();for(i=0;i<a&&(s[i]=t.readPackBits(o[i]),f+=s[i].length,!(t.tell()>=h));++i);if(USE_TYPEDARRAY)for(this.channel=new Uint8Array(f),i=0,r=0,a=s.length;i<a;++i)this.channel.set(s[i],r),r+=s[i].length;else this.channel=Array.prototype.concat.apply([],s)},t.exports=o},function(t,e,n){n(3);var i=function(){this.offset,this.length,this.overlayColorSpace,this.colorComponents,this.opacity,this.kind,this.filter};i.prototype.parse=function(t,e){var n;this.offset=t.tell(),n=t.readUint32(),this.length=n+4,this.overlayColorSpace=t.readUint16(),this.colorComponents=[t.readUint16(),t.readUint16(),t.readUint16(),t.readUint16()],this.opacity=t.readUint16(),this.kind=t.readUint8(),this.filter=t.read(this.offset+this.length-t.tell()),t.seek(this.offset+this.length,0)},t.exports=i},function(t,e,n){n(3),n(10);var i=n(156),r=n(157),o=n(158),s=n(49),a=function(){this.offset,this.length,this.compressionMethod,this.image};a.prototype.parse=function(t,e){switch(this.offset=t.tell(),this.compressionMethod=t.readUint16(),this.compressionMethod){case s.RAW:this.image=new i;break;case s.RLE:this.image=new r;break;default:throw new Error("unknown compression method")}this.image.parse(t,e),this.length=t.tell()-this.offset},a.prototype.createCanvas=function(t,e){var n,i,r,s,a,h=document.createElement("canvas"),f=h.getContext("2d"),l=h.width=t.columns,u=h.height=t.rows,c=new o(t,e,this.image.channel).toRGB();if(l<=0||u<=0)return null;for(i=(n=f.createImageData(l,u)).data,s=0;s<u;++s)for(r=0;r<l;++r)i[4*(a=s*l+r)]=c[0][a],i[4*a+1]=c[1][a],i[4*a+2]=c[2][a],i[4*a+3]=255;return f.putImageData(n,0,0),h},a.prototype.createBytes=function(t,e){var n,i,r,s,a=t.columns,h=t.rows,f=new o(t,e,this.image.channel).toRGBA();if(a<=0||h<=0)return null;n=new Uint8ClampedArray(4*a*h);var l=f[0],u=f[1],c=f[2],p=f[3];for(r=0;r<h;++r)for(i=0;i<a;++i)n[4*(s=r*a+i)]=l[s],n[4*s+1]=u[s],n[4*s+2]=c[s],n[4*s+3]=p?p[s]:255;return n},a.prototype.createColor=function(t,e){return new o(t,e,this.image.channel).toRGB()},t.exports=a},function(t,e,n){var i=n(19),r=(n(3),n(10),n(51)),o=function(){r.call(this)};i.inherits(o,r),o.prototype.parse=function(t,e){var n,i=this.channel=[],r=e.columns,o=e.rows,s=e.channels,a=r*o*(e.depth/8);for(n=0;n<s;++n)i[n]=t.read(a)},t.exports=o},function(t,e,n){var i=n(19),r=(n(3),n(10),n(51));ImageRLE=function(){this.lineLength},i.inherits(ImageRLE,r),ImageRLE.prototype.parse=function(t,e){var n,i,r,o,s,a=this.channel=[],h=this.lineLength=[],f=e.rows,l=e.channels;for(n=0;n<f*l;++n)h[n]=t.readUint16();for(i=0;i<l;++i){for(r=[],o=0,n=0;n<f;++n)r[n]=t.readPackBits(h[i*f+n]*(e.depth/8)),o+=r[n].length;if(USE_TYPEDARRAY)for(a[i]=new Uint8Array(o),n=0,s=0,f=r.length;n<f;++n)a[i].set(r[n],s),s+=r[n].length;else a[i]=Array.prototype.concat.apply([],r)}},t.exports=ImageRLE},function(t,e,n){n(10);var i=n(29),r=function(t,e,n){this.header=t,this.colorModeData=e,this.channel=n,this.parsed=!1,this.redChannel,this.greenChannel,this.blueChannel,this.alphaChannel};r.prototype.parse=function(){switch(this.header.colorMode){case i.BITMAP:console.log("bitmap color mode not supported");break;case i.DUOTONE:console.log("duotone color mode implementation is incomplete");case i.GRAYSCALE:this.fromGrayscale();break;case i.INDEXED_COLOR:this.fromIndexedColor();break;case i.MULTICHANNEL_COLOR:console.log("multichannel color mode implementation is incomplete");case i.RGB_COLOR:this.fromRGB();break;case i.CMYK_COLOR:this.fromCMYK();break;case i.LAB_COLOR:this.fromLAB()}this.parsed=!0},r.prototype.fromRGB=function(){var t,e,n,i,r=this.redChannel=this.channel[0],o=this.greenChannel=this.channel[1],s=this.blueChannel=this.channel[2],a=this.header.depth/8;if(1!==a){if(4===this.channel.length)for(t=this.alphaChannel=this.channel[3],e=i=0,n=r.length;e<n;++i,e+=a)r[i]=r[e],o[i]=o[e],s[i]=s[e],t[i]=t[e];else for(e=i=0,n=r.length;e<n;++i,e+=a)r[i]=r[e],o[i]=o[e],s[i]=s[e];USE_TYPEDARRAY?(this.redChannel=r.subarray(0,i),this.greenChannel=o.subarray(0,i),this.blueChannel=s.subarray(0,i)):r.length=o.length=s.length=i,4===this.channel.length&&(USE_TYPEDARRAY?this.alphaChannel=t.subarray(0,i):t.length=i)}},r.prototype.fromIndexedColor=function(){var t,e,n=this.channel[0],i=n.length,r=this.redChannel=new(USE_TYPEDARRAY?Uint8Array:Array)(i),o=this.greenChannel=new(USE_TYPEDARRAY?Uint8Array:Array)(i),s=this.blueChannel=new(USE_TYPEDARRAY?Uint8Array:Array)(i),a=this.colorModeData.data,h=a.length/3;for(t=e=0;t<i;++e,t+=1)r[e]=a[n[t]],o[e]=a[n[t]+h],s[e]=a[n[t]+2*h]},r.prototype.fromGrayscale=function(){var t,e,n=this.channel[0],i=n.length,r=this.redChannel=new(USE_TYPEDARRAY?Uint8Array:Array)(i),o=this.greenChannel=new(USE_TYPEDARRAY?Uint8Array:Array)(i),s=this.blueChannel=new(USE_TYPEDARRAY?Uint8Array:Array)(i),a=this.header.depth/8;for(t=e=0;t<i;++e,t+=a)r[e]=o[e]=s[e]=n[t]},r.prototype.fromCMYK=function(){var t,e,n,i,r,o,s=this.channel[0],a=this.channel[1],h=this.channel[2],f=this.channel[3],l=s.length,u=this.redChannel=new(USE_TYPEDARRAY?Uint8Array:Array)(l),c=this.greenChannel=new(USE_TYPEDARRAY?Uint8Array:Array)(l),p=this.blueChannel=new(USE_TYPEDARRAY?Uint8Array:Array)(l),d=this.header.depth/8;for(t=o=0;t<l;++o,t+=d)e=255-s[t],n=255-a[t],i=255-h[t],r=255-f[t],u[o]=65535-(e*(255-r)+(r<<8))>>8,c[o]=65535-(n*(255-r)+(r<<8))>>8,p[o]=65535-(i*(255-r)+(r<<8))>>8},r.prototype.fromLAB=function(){var t,e,n,i,r,o,s,a,h=this.channel[0],f=this.channel[1],l=this.channel[2],u=h.length,c=this.redChannel=new(USE_TYPEDARRAY?Uint8Array:Array)(u),p=this.greenChannel=new(USE_TYPEDARRAY?Uint8Array:Array)(u),d=this.blueChannel=new(USE_TYPEDARRAY?Uint8Array:Array)(u),g=this.header.depth/8;for(t=a=0;t<u;++a,t+=g)o=(r=(16+(100*h[t]>>8))/116)+(f[t]-128)/500,s=r-(l[t]-128)/200,e=o>6/29?.950456*Math.pow(o,3):3*(o-16/116)*Math.pow(6/29,2),n=r>6/29?1*Math.pow(r,3):3*(r-16/116)*Math.pow(6/29,2),i=s>6/29?1.088754*Math.pow(s,3):3*(s-16/116)*Math.pow(6/29,2),c[a]=255*Math.pow(2.041588*e-.565007*n-.344731*i,1/2.2),p[a]=255*Math.pow(-.969244*e+1.875968*n+.041555*i,1/2.2),d[a]=255*Math.pow(.013444*e-.118362*n+1.015175*i,1/2.2)},r.prototype.toRGB=function(){return this.parsed||this.parse(),[this.redChannel,this.greenChannel,this.blueChannel]},r.prototype.toRGBA=function(){return this.parsed||this.parse(),[this.redChannel,this.greenChannel,this.blueChannel,this.alphaChannel]},t.exports=r}]);
//# sourceMappingURL=PsdImporter.a05472d3e966fa2ab242.js.map